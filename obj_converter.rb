# TODO:
# Script the .obj conversion
# TODO:
# Accommodate for scenarios where the faces aren't all triangles

# Verts
verts = [[-15.701357, 32.023460, 25.049507],
[-14.729555, 26.699127, 30.356380],
[-44.382896, 33.898064, -2.776214],
[-13.220903, 13.459648, -6.261380],
[-9.854250, 12.411188, 3.305099],
[-17.826258, 17.126747, 11.540981],
[-14.445233, 16.997700, -7.219071],
[-13.839796, 7.748582, 11.268114],
[-11.301775, 7.431731, -4.893054],
[-9.850714, 20.725178, 3.285486],
[-14.648999, 12.950267, 2.502770],
[-16.040688, 17.041237, 2.124522],
[-14.644253, 12.949300, 2.503688],
[-16.061390, 13.717735, 10.841773],
[-14.648999, 12.950267, 2.502770],
[-13.058794, 32.017128, 21.085934],
[-8.899431, 7.748582, 12.158489],
[-11.966217, 32.023460, 25.722672],
[-5.635744, 7.431731, -3.871896],
[-4.372810, 30.920090, -27.109398],
[-6.668777, 13.717735, 12.534553],
[-5.081076, 12.950267, 4.227145],
[-5.259052, 17.126747, 13.805900],
[-5.085844, 12.949300, 4.226348],
[-3.644900, 17.041239, 4.358547],
[-9.850717, 20.725178, 3.285485],
[-3.359668, 13.459648, -4.484143],
[-5.081076, 12.950267, 4.227145],
[-1.878032, 16.997700, -4.954152],
[24.624964, 33.898064, 9.660698]]

# Normals
normals = [[-0.916006, 0.142625, -0.374956],
[0.680742, 0.575704, 0.452940],
[0.499084, 0.862741, 0.081200],
[0.926277, 0.226542, -0.301149],
[-0.916006, 0.142625, -0.374956],
[0.927167, 0.332421, 0.172793],
[0.916157, 0.363025, 0.169911],
[-0.916006, 0.142625, -0.374956],
[-0.959543, 0.281557, -0.001590],
[-0.827232, 0.528995, -0.189348],
[-0.926973, -0.353888, -0.124434],
[0.927167, 0.332421, 0.172793],
[0.927167, 0.332421, 0.172793],
[-0.926973, -0.353888, -0.124434],
[-0.927082, -0.333855, -0.170470],
[-0.780709, 0.344949, -0.521060],
[0.989273, 0.142625, -0.031578],
[0.913495, 0.344950, -0.215722],
[0.899726, 0.281557, 0.333496],
[-0.959543, 0.281557, -0.001590],
[0.912091, -0.353888, 0.207011],
[0.912091, -0.353888, 0.207011],
[-0.929155, 0.332421, -0.161762],
[-0.929155, 0.332421, -0.161762],
[-0.929155, 0.332421, -0.161762],
[0.841287, 0.528995, 0.111360],
[-0.762863, 0.226542, -0.605573],
[0.928264, -0.333855, 0.163909],
[-0.917831, 0.363025, -0.160619],
[-0.496030, 0.862741, -0.098144]]

# Faces
# vert/tex/normal
faces = [1,4,1,16,3,16,5,1,5,
1,4,1,5,1,5,8,2,8,
18,32,18,17,31,17,5,30,5,
18,32,18,5,30,5,16,29,16,
16,3,16,1,4,1,2,5,2,
9,10,9,5,9,5,20,11,20,
8,2,8,14,6,14,11,20,11,
6,12,6,13,23,13,12,22,12,
13,27,13,14,16,14,10,17,10,
6,12,6,14,26,14,13,24,13,
4,15,4,5,7,5,9,14,9,
10,16,10,14,17,14,5,13,5,
9,10,9,15,21,15,4,8,4,
13,23,13,4,25,4,7,13,7,
12,22,12,13,23,13,7,13,7,
10,18,10,4,19,4,13,28,13,
7,13,7,3,7,3,12,22,12,
12,22,12,3,7,3,6,12,6,
4,15,4,10,16,10,5,7,5,
14,17,14,8,14,8,5,13,5,
16,29,16,2,33,2,18,32,18,
19,34,19,20,36,20,5,35,5,
17,31,17,22,38,22,21,37,21,
23,39,23,25,41,25,24,40,24,
24,42,24,26,44,26,21,43,21,
23,39,23,24,46,24,21,45,21,
27,47,27,19,49,19,5,48,5,
26,43,26,5,50,5,21,44,21,
19,34,19,27,52,27,28,51,28,
24,40,24,29,50,29,27,53,27,
25,41,25,29,50,29,24,40,24,
26,54,26,24,56,24,27,55,27,
29,50,29,25,41,25,30,48,30,
25,41,25,23,39,23,30,48,30,
27,47,27,5,48,5,26,43,26,
21,44,21,5,50,5,17,49,17]

geometry = []
faces.each_with_index do |fi,i|  
  case i%3
  when 0
    # vertex
    geometry.concat verts[fi-1] # NOTE: 1 based indexes
  when 1 
    # tex
    # skip.    
  when 2
    # normal
    geometry.concat normals[fi-1] # NOTE: 1 based indexes
  end
end

tot_points = geometry.count/6
puts "static const GLfloat objVertexData[#{geometry.count}] = {"
tot_points.times do |n|
  start_idx = n*6
  end_idx = start_idx+6
  line = geometry[start_idx...end_idx]
  puts line.join(', ') + ","
end
puts "};"